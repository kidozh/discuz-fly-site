"use strict";(self.webpackChunkdiscuz_fly_site=self.webpackChunkdiscuz_fly_site||[]).push([[819],{1186:function(e,t,a){a.r(t);a(6910);var n=a(6540),r=a(4755),l=a(4011),s=a(8693);const o=a(4362),i=a(7307);t.default=e=>{var t,a;let{pageContext:c}=e;const g=(null==c?void 0:c.posts)||[],m=(0,n.useMemo)(()=>g.map(e=>{const t=e.frontmatter||{},a=t.title||e.relativePath,n=(t.slug||e.relativePath||"").replace(/\.md$|\.markdown$/i,"").replace(/^\/+|\/+$/g,""),r=t.date?new Date(t.date):null,l=t.excerpt||"",s=Array.isArray(t.tags)?t.tags.map(String):[];return{id:e.id||n,title:a,slug:n,date:r,excerpt:l,tags:s}}).sort((e,t)=>e.date||t.date?e.date?t.date?t.date.getTime()-e.date.getTime():-1:1:0),[g]),{t:u,i18n:d}=(0,r.useTranslation)(),p=(null==c||null===(t=c.i18n)||void 0===t?void 0:t.language)||d&&d.language||"en",b=(null==c||null===(a=c.i18n)||void 0===a?void 0:a.defaultLanguage)||"en",y=p&&p!==b?"/"+p:"",h={en:o,zh:i},x=(e,t)=>{try{if(d&&d.language){const a=u(e,Object.assign({lng:p},t||{}));if("string"==typeof a&&a!==e)return a}}catch(a){}return((e,t)=>{const a=h[p]&&h[p][e];return a&&"string"==typeof a?t?Object.keys(t).reduce((e,a)=>e.replace(new RegExp("{{\\s*"+a+"\\s*}}","g"),String(t[a])),a):a:e})(e,t)},f=(0,n.useMemo)(()=>{const e=new Set;return m.forEach(t=>t.tags.forEach(t=>e.add(t))),Array.from(e).sort()},[m]),v=(null==c?void 0:c.selectedTag)||null,{0:w,1:E}=(0,n.useState)(v),{0:N,1:S}=(0,n.useState)(Number((null==c?void 0:c.currentPage)||(()=>{try{const e=new URLSearchParams("undefined"!=typeof window?window.location.search:""),t=parseInt(e.get("page")||String((null==c?void 0:c.currentPage)||"1"),10);return Number.isFinite(t)&&t>0?t:1}catch(e){return Number((null==c?void 0:c.currentPage)||1)}})()));(0,n.useEffect)(()=>{try{const e=new URL(window.location.href);e.pathname=w?y+"/blog/tag/"+String(w).toLowerCase().replace(/[^a-z0-9]+/g,"-")+"/":y+"/blog/",N&&N>1?e.searchParams.set("page",String(N)):e.searchParams.delete("page"),window.history.replaceState({},"",e.toString())}catch(e){}},[w,N]);const k=(0,n.useMemo)(()=>w?m.filter(e=>e.tags.includes(w)):m,[m,w]),C=Math.max(1,Math.ceil(k.length/5)),M=Math.min(Math.max(1,N),C),P=5*(M-1),T=k.slice(P,P+5);function _(e){const t=Math.max(1,Math.min(C,e));S(t),window.scrollTo({top:0,behavior:"smooth"})}return n.createElement(l.A,null,n.createElement("main",{className:"max-w-4xl mx-auto py-12 px-4"},n.createElement("h1",{className:"text-3xl font-bold mb-6"},String(x("blog.title")||"Blog")),n.createElement("div",{className:"mb-6"},n.createElement("div",{className:"flex items-center space-x-3 flex-wrap"},n.createElement("button",{onClick:()=>{E(null),S(1)},className:"px-3 py-1 rounded "+(null===w?"bg-brand text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200")},String(x("blog.all",{count:m.length}))),f.map(e=>n.createElement("button",{key:e,onClick:()=>{E(e),S(1)},className:"px-3 py-1 rounded "+(w===e?"bg-brand text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200")},e)))),n.createElement("div",{className:"mb-4 text-sm text-gray-600"},String(x("blog.count",{count:k.length}))," â€” ",String(x("blog.page_of",{current:M,total:C}))),n.createElement("ul",{className:"space-y-6"},T.map(e=>n.createElement("li",{key:e.id,role:"link",tabIndex:0,onClick:()=>(0,s.navigate)(y+"/blog/"+e.slug+"/"),onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),(0,s.navigate)(y+"/blog/"+e.slug+"/"))},className:"border rounded p-4 cursor-pointer transition-transform transform hover:-translate-y-1 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-brand"},n.createElement("h2",{className:"text-xl font-semibold mb-1"},n.createElement(s.Link,{to:y+"/blog/"+e.slug+"/",className:"text-brand"},e.title)),e.date?n.createElement("div",{className:"text-sm text-gray-500 mb-2"},(e=>{if(!e)return null;try{return new Intl.DateTimeFormat(d.language||"en",{year:"numeric",month:"2-digit",day:"2-digit"}).format(e)}catch(t){return e.toISOString().slice(0,10)}})(e.date)):null,e.excerpt?n.createElement("p",{className:"text-sm text-gray-700 mb-2"},e.excerpt):null,e.tags&&e.tags.length?n.createElement("div",{className:"flex flex-wrap gap-2"},e.tags.map(e=>n.createElement("button",{key:e,onClick:t=>{t.stopPropagation(),E(e),S(1)},className:"text-sm px-2 py-1 bg-gray-100 rounded"},e))):null))),n.createElement("div",{className:"mt-6 flex items-center justify-between"},n.createElement("div",null,n.createElement("button",{onClick:()=>_(N-1),disabled:N<=1,className:"px-3 py-1 rounded bg-gray-100 hover:bg-gray-200 disabled:opacity-50"},String(x("blog.previous")||"Previous")),n.createElement("button",{onClick:()=>_(N+1),disabled:N>=C,className:"ml-2 px-3 py-1 rounded bg-gray-100 hover:bg-gray-200 disabled:opacity-50"},String(x("blog.next")||"Next"))),n.createElement("div",{className:"text-sm text-gray-600"},String(x("blog.showing_range",{start:P+1,end:Math.min(P+5,k.length),total:k.length}))))))}}}]);
//# sourceMappingURL=component---src-templates-blog-index-tsx-cb256d5ab3b2f458b972.js.map