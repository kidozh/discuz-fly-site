{"version":3,"file":"component---src-templates-markdown-document-tsx-45d50f64f07555626bd3.js","mappings":"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","sources":["webpack://discuz-fly-site/./src/templates/MarkdownDocument.tsx","webpack://discuz-fly-site/./src/components/SeoHead.tsx","webpack://discuz-fly-site/./src/components/DocSidebar.tsx","webpack://discuz-fly-site/./src/components/LocalizedLink.tsx"],"sourcesContent":["import React, { useEffect } from 'react'\nimport { graphql } from 'gatsby'\nimport Layout from '../components/Layout'\nimport SeoHead from '../components/SeoHead'\nimport { useTranslation } from 'gatsby-plugin-react-i18next'\nimport DocSidebar from '../components/DocSidebar'\n\ntype Props = {\n  data: any\n  pageContext: any\n  location?: any\n}\n\nconst MarkdownDocument: React.FC<Props> = ({ data, pageContext, location }) => {\n  // graphql query for the markdown node can fail if transformer isn't present\n  // so we accept html/title passed through pageContext when available.\n  const html = pageContext && pageContext.html ? pageContext.html : (data && data.markdownRemark && data.markdownRemark.html);\n  // compute title with fallbacks: frontmatter -> pageContext.title -> first H1 from html -> filename\n  const fmTitle = data && data.markdownRemark && data.markdownRemark.frontmatter && data.markdownRemark.frontmatter.title\n  let title = pageContext && pageContext.title ? pageContext.title : fmTitle\n  if (!title && html) {\n    // extract first H1 from rendered HTML\n    try {\n      const m = html.match(/<h1[^>]*>(.*?)<\\/h1>/i)\n      if (m && m[1]) {\n        title = m[1].replace(/<[^>]+>/g, '').trim()\n      }\n    } catch (e) {}\n  }\n  if (!title && pageContext?.slug) {\n    const parts = String(pageContext.slug).split('/').filter(Boolean)\n    title = parts.length ? parts[parts.length - 1] : pageContext.slug\n  }\n  // pageContext.language will be set by createPages\n  // Ensure i18n is initialized and set to the page language on the client.\n  const { i18n } = useTranslation();\n  useEffect(() => {\n    const langFromContext = pageContext?.i18n?.language || pageContext?.language;\n    if (langFromContext && i18n && i18n.language !== langFromContext) {\n      try { i18n.changeLanguage(langFromContext); } catch (e) {}\n    }\n  }, [pageContext?.i18n?.language, pageContext?.language, i18n]);\n  // Build sidebar nodes from pageContext.docPages (written by gatsby-node)\n  const nodes = React.useMemo(() => {\n    const list = pageContext?.docPages || []\n    const lang = pageContext?.i18n?.language || pageContext?.language || 'en'\n    return list.filter((p: any) => String(p.language) === String(lang)).map((p: any) => ({ id: p.id, path: p.path, title: p.title || p.id, date: p.date || null }))\n  }, [pageContext])\n\n  const activePath = (location && location.pathname) || pageContext?.i18n?.originalPath || pageContext?.path || pageContext?.slug\n\n  return (\n    <Layout pageProps={{ pageContext }}>\n      <SeoHead title={title || undefined} lang={pageContext?.i18n?.language || pageContext?.language} pathname={activePath} />\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8 max-w-6xl mx-auto py-12 px-4\">\n        <aside className=\"hidden md:block\">\n          <DocSidebar nodes={nodes} language={pageContext?.i18n?.language || pageContext?.language} docPrefix={pageContext?.docPrefix || 'doc'} activePath={activePath} showBack />\n        </aside>\n        <main className=\"md:col-span-3\">\n          {title ? <h1 className=\"text-2xl font-bold mb-6\">{title}</h1> : null}\n          <article className=\"prose lg:prose-lg dark:prose-invert\" dangerouslySetInnerHTML={{ __html: html || '' }}>\n          </article>\n        </main>\n      </div>\n    </Layout>\n  )\n}\n\n\n\nexport default MarkdownDocument\n\nexport const query = graphql`\n  query MarkdownDocumentQuery($id: String!, $language: String!) {\n    markdownRemark(id: { eq: $id }) {\n      html\n      frontmatter {\n        title\n        slug\n        language\n      }\n    }\n    locales: allLocale(filter: { language: { eq: $language } }) {\n      edges {\n        node {\n          ns\n          data\n          language\n        }\n      }\n    }\n  }\n`\n","import * as React from 'react'\nimport { useStaticQuery, graphql } from 'gatsby'\n\ntype Props = {\n  title?: string\n  description?: string\n  lang?: string\n  pathname?: string\n}\n\nconst SeoHead: React.FC<Props> = ({ title, description = '', lang = 'en', pathname }) => {\n  const data = useStaticQuery(graphql`\n    query SiteMetaForHead {\n      site {\n        siteMetadata {\n          title\n        }\n      }\n    }\n  `)\n\n  const siteTitle = data?.site?.siteMetadata?.title || ''\n  const siteUrl = process.env.SITE_URL || ''\n  const fullTitle = title ? `${title} | ${siteTitle}` : siteTitle\n  let url = ''\n  try {\n    if (pathname) {\n      if (siteUrl) {\n        url = new URL(pathname, siteUrl).href\n      } else {\n        // fallback to using pathname as-is when no siteUrl is configured\n        url = pathname\n      }\n    } else {\n      url = siteUrl || ''\n    }\n  } catch (e) {\n    url = pathname || siteUrl || ''\n  }\n\n  return (\n    <>\n      <html lang={lang} />\n      <title>{fullTitle}</title>\n      <meta name=\"description\" content={description} />\n      <meta property=\"og:title\" content={fullTitle} />\n      <meta property=\"og:description\" content={description} />\n      <meta property=\"og:type\" content=\"website\" />\n      <meta property=\"og:url\" content={url} />\n      <meta name=\"twitter:card\" content=\"summary\" />\n    </>\n  )\n}\n\nexport default SeoHead\n","import React from 'react'\nimport { useTranslation } from 'gatsby-plugin-react-i18next'\nimport LocalizedLink from './LocalizedLink'\n\ntype DocSidebarProps = {\n  nodes: any[]\n  language: string\n  docPrefix: string\n  activePath?: string\n  showBack?: boolean\n}\n\nconst DocSidebar: React.FC<DocSidebarProps> = ({ nodes, language, docPrefix, activePath, showBack }) => {\n  const docBase = (lang: string) => `/${lang}/${docPrefix}`;\n  const { t } = useTranslation();\n  const indexLabel = t('docs.index', 'Index');\n  const backLabel = t('docs.back', 'Back to docs');\n  const undatedLabel = t('docs.undated', 'No date');\n\n  const dateFormatter = React.useMemo(() => {\n    try {\n      return new Intl.DateTimeFormat(language || 'en')\n    } catch (e) { return null }\n  }, [language])\n\n  const formatDate = (d: any) => {\n    try { if (!d) return undatedLabel; return dateFormatter ? dateFormatter.format(new Date(d)) : String(d) } catch (e) { return String(d) }\n  }\n\n  function computeSlug(node: any) {\n    // If caller provided a normalized `path` (from gatsby-node pageContext), derive slug from it\n    if (node && node.path && typeof node.path === 'string') {\n      let p = node.path;\n      // normalize: remove leading slashes\n      p = p.replace(/^\\/+/, '');\n      // remove leading language/docPrefix like \"en/doc/\" or \"zh/doc/\"\n      p = p.replace(new RegExp(`^[a-z]{2}\\/${docPrefix}\\/?`), '');\n      // if still prefixed by language, strip it (e.g. \"en/...\" remaining)\n      p = p.replace(/^[a-z]{2}\\//, '');\n      p = String(p).replace(/^\\/+|\\/+$/g, '');\n      return p;\n    }\n\n    let slug = node.frontmatter?.slug || '';\n    if (!slug && node.parent && node.parent.absolutePath) {\n      const absolutePath = String(node.parent.absolutePath || '');\n      const parts = absolutePath.split(/src\\/document\\//i);\n      let rel = '';\n      if (Array.isArray(parts) && parts.length > 1 && parts[1]) {\n        rel = parts[1];\n      } else {\n        const last = absolutePath.split('/').pop();\n        rel = last || '';\n      }\n      rel = String(rel).replace(/\\.[a-z]{2}\\.md$/i, '').replace(/\\.md$/i, '');\n      if (rel.match(/\\/index$/i)) {\n        slug = rel.replace(/\\/index$/i, '');\n      } else {\n        slug = rel;\n      }\n      slug = slug.replace(/^\\/+|\\/+$/g, '');\n    }\n    return slug;\n  }\n\n  const root: any = { children: new Map() };\n\n  nodes.forEach((node: any) => {\n    const slug = computeSlug(node);\n    const parts = slug === '' ? [] : slug.split('/').filter(Boolean);\n    let cursor = root;\n      parts.forEach((part: string, idx: number) => {\n      if (!cursor.children.has(part)) {\n        cursor.children.set(part, { name: part, children: new Map() });\n      }\n      cursor = cursor.children.get(part);\n      if (idx === parts.length - 1) {\n        const title = node.title || node.frontmatter?.title || node.frontmatter?.slug || part;\n        cursor.title = title;\n        cursor.excerpt = node.excerpt || null;\n        cursor.date = node.date || node.frontmatter?.date || null;\n        const path = `${docBase(language)}${slug === '' ? '' : '/' + slug}`;\n        cursor.path = path;\n      }\n    });\n    if (parts.length === 0) {\n      root.title = node.title || node.frontmatter?.title || 'Index';\n      root.path = `${docBase(language)}`;\n    }\n  });\n\n  function nodeContainsActive(node: any): boolean {\n    if (!activePath) return false;\n    const normalize = (p: any) => String(p || '').replace(/\\/+$|^\\s+|\\s+$/g, '').replace(/\\/$/, '');\n    if (node.path && normalize(node.path) === normalize(activePath)) return true;\n    const children = Array.from(node.children ? node.children.values() : []);\n    return children.some((c: any) => nodeContainsActive(c));\n  }\n\n  function renderTree(node: any, prefix = ''): any {\n    const items: any[] = [];\n    if (node.title && node.path) {\n      const normalize = (p: any) => String(p || '').replace(/\\/+$|^\\s+|\\s+$/g, '').replace(/\\/$/, '');\n      const isActive = activePath && normalize(node.path) === normalize(activePath);\n      const activeBg = isActive ? 'bg-brand/10 dark:bg-brand-700 dark:text-white ring-2 ring-brand' : '';\n      items.push(\n        <li key={node.path} className=\"py-2\">\n          <LocalizedLink\n            to={node.path}\n            className={`block p-3 border border-gray-200 rounded-md shadow-sm transform transition-transform duration-150 ease-out hover:-translate-y-0.5 hover:shadow-md ${activeBg}`}\n            prefetch=\"true\"\n          >\n            <div className={`font-medium ${isActive ? 'text-brand' : 'text-theme'}`}>{node.title}</div>\n            <div className=\"text-xs text-gray-400 mt-1\">{node.date ? formatDate(node.date) : undatedLabel}</div>\n          </LocalizedLink>\n        </li>\n      );\n    }\n    const children = Array.from(node.children ? node.children.values() : []);\n    children.sort((a: any, b: any) => {\n      const da = a.date ? new Date(a.date).getTime() : null;\n      const db = b.date ? new Date(b.date).getTime() : null;\n      if (da && db) return db - da; // newest first\n      if (da && !db) return -1;\n      if (!da && db) return 1;\n      return a.name.localeCompare(b.name);\n    });\n    children.forEach((child: any) => {\n      const childKey = `${prefix}/${child.name}`;\n      const hasChildren = child.children && child.children.size > 0;\n      if (hasChildren) {\n        const open = nodeContainsActive(child);\n        items.push(\n          <li key={childKey} className=\"py-1\">\n            <details open={open}>\n              <summary className=\"cursor-pointer font-medium\">{child.name}</summary>\n              <ul className=\"pl-4 mt-2\">\n                {renderTree(child, childKey)}\n              </ul>\n            </details>\n          </li>\n        );\n      } else {\n        const title = child.title || child.name;\n        const path = child.path || `${docBase(language)}/${[...childKey.split('/').filter(Boolean)].join('/')}`;\n        const normalize = (p: any) => String(p || '').replace(/\\/+$|^\\s+|\\s+$/g, '').replace(/\\/$/, '');\n        const isActive = activePath && normalize(path) === normalize(activePath);\n        const activeBg = isActive ? 'bg-brand/10 dark:bg-brand-700 dark:text-white ring-2 ring-brand' : '';\n        items.push(\n          <li key={childKey} className=\"py-2\">\n            <LocalizedLink\n              to={path}\n              className={`block p-3 border border-gray-200 rounded-md shadow-sm transform transition-transform duration-150 ease-out hover:-translate-y-0.5 hover:shadow-md ${activeBg}`}\n              prefetch=\"true\"\n            >\n              <div className={`${isActive ? 'text-brand font-medium' : 'font-medium'}`}>{title}</div>\n              <div className=\"text-xs text-gray-400 mt-1\">{child.date ? formatDate(child.date) : undatedLabel}</div>\n            </LocalizedLink>\n          </li>\n        );\n      }\n    });\n    return items;\n  }\n\n  return (\n    <nav>\n      <div className=\"mb-3\">\n        {showBack ? (\n          <LocalizedLink to={`/${language}/${docPrefix}/`} className=\"inline-flex items-center text-sm font-semibold text-gray-700 hover:text-brand\" prefetch=\"true\">\n            <span className=\"mr-2\">←</span>\n            <span>{backLabel}</span>\n          </LocalizedLink>\n        ) : (\n          root.path ? (\n            <LocalizedLink to={root.path} className=\"inline-flex items-center text-sm font-semibold text-gray-700 hover:text-brand\" prefetch=\"true\">\n              ← <span className=\"ml-2\">{root.title || indexLabel}</span>\n            </LocalizedLink>\n          ) : null\n        )}\n      </div>\n      <ul className=\"space-y-2\">\n        {renderTree(root)}\n      </ul>\n    </nav>\n  );\n}\n\nexport default DocSidebar;\n","import React from 'react'\nimport { Link } from 'gatsby-plugin-react-i18next'\n\nconst LocalizedLink: React.FC<any> = (props) => {\n  // Simple wrapper to centralize future link logic and keep usage ergonomic\n  return <Link {...props} />\n}\n\nexport default LocalizedLink\n"],"names":["_ref","_pageContext$i18n2","_pageContext$i18n4","_pageContext$i18n5","_pageContext$i18n6","data","pageContext","location","html","markdownRemark","fmTitle","frontmatter","title","m","match","replace","trim","e","slug","parts","String","split","filter","Boolean","length","i18n","useTranslation","useEffect","_pageContext$i18n","langFromContext","language","changeLanguage","nodes","React","_pageContext$i18n3","list","docPages","lang","p","map","id","path","date","activePath","pathname","originalPath","Layout","pageProps","SeoHead","undefined","className","DocSidebar","docPrefix","showBack","dangerouslySetInnerHTML","__html","_data$site","_data$site$siteMetada","description","useStaticQuery","siteTitle","site","siteMetadata","siteUrl","process","SITE_URL","fullTitle","url","URL","href","name","content","property","docBase","t","indexLabel","backLabel","undatedLabel","dateFormatter","Intl","DateTimeFormat","formatDate","d","format","Date","root","children","Map","nodeContainsActive","node","normalize","Array","from","values","some","c","forEach","_node$frontmatter","RegExp","parent","absolutePath","rel","isArray","pop","computeSlug","cursor","_node$frontmatter5","part","idx","has","set","get","_node$frontmatter2","_node$frontmatter3","_node$frontmatter4","excerpt","LocalizedLink","to","prefetch","renderTree","prefix","items","isActive","activeBg","push","key","sort","a","b","da","getTime","db","localeCompare","child","childKey","size","open","_toConsumableArray","join","props","Link"],"sourceRoot":""}